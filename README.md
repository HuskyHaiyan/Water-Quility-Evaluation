# Water Quility Evaluation
基于自动机器学习的水色图像水质评价

## 一、背景介绍
   * 行业背景    
   从事渔业生产有经验的从业者可通过观察水色变化调控水质，以维持养殖水体生态系统中浮游植物、微生物类、浮游动物等合理的动态平衡。由于这些多是通过经验和肉眼观察进行判断，存在主观性引起的观察性偏倚，使观察结果的可比性、可重复性降低，不易推广应用。当前，数字图像处理技术为计算机监控技术在水产养殖业的应用提供更大的空间。在水质在线监测方面，数字图像处理技术是基于计算机视觉，以专家经验为基础，对池塘水色进行优劣分级，达到对池塘水色的准确快速判别。
   
   
  * 问题分析   
由于图片数据由专业人士获取，因此我们的分析主要从数据采集完成后如下五个步骤着手分析问题：   
①、数据转换：为了将图像数据转换为计算机能够识别的形式，通过PIL库对图片进行读取，并通过numpy进行数值计算。   
②、数据清洗：为了去除每张图片噪声数据（外部环境，非水色图片部分）的影响，通过PIL库截取每张图片中心100*100像素区域的水色图片作为我们的分析数据。       
 ③、特征提取：将图片的R、G、B颜色通道分离出来。使用概率论的基础知识，分别对每张图片的R、G、B三阶颜色矩阵进行计算，作为每张图片的特征。   
④、数据整理：将存储在本地的图片数据进行批量读取，转换为我们的特征数据，并将特征数据与数据标签保存，为模型训练做准备。   
⑤、模型构建与评价：通过上一步得到的特征数据与数据标签，划分训练集与测试集。通过scikit-learn构建决策树、k近邻、朴素贝叶斯、支持向量机、神经网络等分类模型并进行GridSearchCV参数搜索，最后使用模型分类准确率和混淆矩阵对模型进行评估。   

## 二、数据说明
### 1、原始数据
  images:共计五类水色图片，命名规则为：水色类别_编号。    

  图片数量：203张图片(每张图片约为400万像素)
  图片类别：5类图片
  
### 2、处理后的数据
 通过截取每张图片的中心100*100的像素区域，求每张图片的R、G、B通道的一二三阶矩阵作为每张图片的特征    
 生成203*9的DataFrame作为训练数据data，保存为data.json        
 同时根据命图片的命名，获取图片的类别作为数据的标签 label,保存为label.json
 
## 三、数据建模与模型评估
将测试集与训练集按2:8进行划分、分别代入决策树、K近邻、朴素贝叶斯、神经网络与支持向量机等分类模型中进行训练，并通过分类的准确率与混淆矩阵对模型进行评估。
在训练模型时，为了找到最好的参数，我们通过sklearn中的GridSearchCV对模型的参数进行网格搜索，使得模型的效果尽可能地好。



